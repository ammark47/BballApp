// Generated by CoffeeScript 1.9.3
(function() {
  var prependToError, prependUnlessPresent,
    slice = [].slice;

  prependUnlessPresent = function(str, prefix) {
    if (str.indexOf(prefix) === -1) {
      return [prefix, str].join(': ');
    } else {
      return str;
    }
  };

  prependToError = function(prefix, callback) {
    return function() {
      var args, err;
      err = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      if (err) {
        if (err.message) {
          err.message = prependUnlessPresent(err.message, prefix);
        } else {
          err = prependUnlessPresent(err, prefix);
        }
      }
      return callback.apply(null, [err].concat(slice.call(args)));
    };
  };

  module.exports = prependToError;

}).call(this);
